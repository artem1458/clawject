"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[37],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),i=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=i(e.components);return o.createElement(c.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},b=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=i(n),b=r,d=p["".concat(c,".").concat(b)]||p[b]||f[b]||a;return n?o.createElement(d,s(s({ref:t},u),{},{components:n})):o.createElement(d,s({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:r,s[1]=l;for(var i=2;i<a;i++)s[i]=n[i];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}b.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7294),r=n(6010);const a={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>k});var o=n(7462),r=n(7294),a=n(6010),s=n(2466),l=n(6550),c=n(1980),i=n(7392),u=n(12);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:r}}=e;return{value:t,label:n,attributes:o,default:r}}))}function f(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,i.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function b(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function d(e){let{queryString:t=!1,groupId:n}=e;const o=(0,l.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,c._X)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=f(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!b({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:a}))),[c,i]=d({queryString:n,groupId:o}),[p,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,u.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),h=(()=>{const e=c??p;return b({value:e,tabValues:a})?e:null})();(0,r.useLayoutEffect)((()=>{h&&l(h)}),[h]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!b({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),i(e),m(e)}),[i,m,a]),tabValues:a}}var h=n(2389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:n,selectedValue:l,selectValue:c,tabValues:i}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,s.o5)(),f=e=>{const t=e.currentTarget,n=u.indexOf(t),o=i[n].value;o!==l&&(p(t),c(o))},b=e=>{let t=null;switch(e.key){case"Enter":f(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t)},i.map((e=>{let{value:t,label:n,attributes:s}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>u.push(e),onKeyDown:b,onClick:f},s,{className:(0,a.Z)("tabs__item",y.tabItem,s?.className,{"tabs__item--active":l===t})}),n??t)})))}function g(e){let{lazy:t,children:n,selectedValue:o}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function w(e){const t=m(e);return r.createElement("div",{className:(0,a.Z)("tabs-container",y.tabList)},r.createElement(v,(0,o.Z)({},e,t)),r.createElement(g,(0,o.Z)({},e,t)))}function k(e){const t=(0,h.Z)();return r.createElement(w,(0,o.Z)({key:String(t)},e))}},7088:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var o=n(7462),r=(n(7294),n(3905)),a=n(4866),s=n(5162);const l={title:"@Scope",id:"scope"},c=void 0,i={unversionedId:"base-concepts/scope",id:"base-concepts/scope",title:"@Scope",description:"Overview",source:"@site/docs/04-base-concepts/09-scope.mdx",sourceDirName:"04-base-concepts",slug:"/base-concepts/scope",permalink:"/docs/base-concepts/scope",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"@Scope",id:"scope"},sidebar:"tutorialSidebar",previous:{title:"@Qualifier",permalink:"/docs/base-concepts/qualifier"},next:{title:"@Lazy",permalink:"/docs/base-concepts/lazy"}},u={},p=[{value:"Overview",id:"overview",level:2},{value:"Singleton scope <em>(default)</em>",id:"singleton-scope-default",level:2},{value:"Prototype scope",id:"prototype-scope",level:2}],f={toc:p},b="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(b,(0,o.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"The Scope of Bean is a way to define when Bean will be created and how it is managed by container."),(0,r.kt)("p",null,"Clawject provides ",(0,r.kt)("inlineCode",{parentName:"p"},"@Scope")," decorator to define a scope and has 2 built-in scopes: ",(0,r.kt)("inlineCode",{parentName:"p"},"singleton")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"prototype"),"."),(0,r.kt)("h2",{id:"singleton-scope-default"},"Singleton scope ",(0,r.kt)("em",{parentName:"h2"},"(default)")),(0,r.kt)("p",null,"When we define a bean with the singleton scope, the container creates a single instance of that bean,\nall requests for that bean will return the same object, which is cached.\nAny modifications to the object will be reflected in all references to the bean.\nThis scope is the default value if no other scope is specified."),(0,r.kt)("p",null,"Let's use the singleton scope in the following example:"),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"implicit-scope",label:"Declare a Bean with default singleton scope",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'class Foo {\n  name = \'foo\';\n}\n\nclass Bar {\n  constructor(public foo: Foo) {}\n\n  setName(): void {\n    this.foo.name = \'bar\';\n  }\n}\n\nclass Baz {\n  constructor(public foo: Foo) {}\n}\n\nclass MyContext extends CatContext {\n  foo = Bean(Foo);\n\n  bar = Bean(Bar);\n  baz = Bean(Baz);\n\n  @PostConstruct\n  postConstruct(\n    bar: Bar,\n    baz: Baz,\n  ) {\n    bar.setName();\n\n    console.log(bar.foo === baz.foo); // <- prints "true"\n\n    console.log(bar.foo.property); // <- prints "bar"\n    console.log(baz.foo.property); // <- prints "bar"\n  }\n}\n'))),(0,r.kt)(s.Z,{value:"explicit-scope",label:"Declare Scope of Bean using decorator",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'class Foo {\n  name = \'foo\';\n}\n\nclass Bar {\n  constructor(public foo: Foo) {}\n\n  setName(): void {\n    this.foo.name = \'bar\';\n  }\n}\n\nclass Baz {\n  constructor(public foo: Foo) {}\n}\n\nclass MyContext extends CatContext {\n  @Scope("singleton")\n  foo = Bean(Foo);\n\n  bar = Bean(Bar);\n  baz = Bean(Baz);\n\n  @PostConstruct\n  postConstruct(\n    bar: Bar,\n    baz: Baz,\n  ) {\n    bar.setName();\n\n    console.log(bar.foo === baz.foo); // <- prints "true"\n\n    console.log(bar.foo.property); // <- prints "bar"\n    console.log(baz.foo.property); // <- prints "bar"\n  }\n}\n')))),(0,r.kt)("h2",{id:"prototype-scope"},"Prototype scope"),(0,r.kt)("p",null,"A Bean with the prototype scope will return a different instance every time it is requested from the container."),(0,r.kt)("p",null,"Let's use the prototype scope in the following example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'class Foo {\n  name = \'foo\';\n}\n\nclass Bar {\n  constructor(public foo: Foo) {}\n\n  setName(): void {\n    this.foo.name = \'bar\';\n  }\n}\n\nclass Baz {\n  constructor(public foo: Foo) {}\n}\n\nclass MyContext extends CatContext {\n  @Scope("prototype")\n  foo = Bean(Foo);\n\n  bar = Bean(Bar);\n  baz = Bean(Baz);\n\n  @PostConstruct\n  postConstruct(\n    bar: Bar,\n    baz: Baz,\n  ) {\n    bar.setName();\n\n    console.log(bar.foo === baz.foo); // <- prints "false"\n\n    console.log(bar.foo.property); // <- prints "bar"\n    console.log(baz.foo.property); // <- prints "foo"\n  }\n}\n')),(0,r.kt)("p",null,"As you can see - Scopes is a very simple concept, but it is very important to understand it."),(0,r.kt)("p",null,"If you want to define your own scope, for example ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTPRequestScope")," - you can check out the ",(0,r.kt)("a",{parentName:"p",href:"/docs/advanced-concepts/custom-scopes"},"Custom Scopes")," section."))}d.isMDXComponent=!0}}]);